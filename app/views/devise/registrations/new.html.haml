%h2 Sign up
= nested_form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f|
  = devise_error_messages!
  .row-fluid
    .span3
    .span9
      .well.span8
        %h4 1. Tell us who you are
        .span4
          %div
            = f.label :username
            = f.text_field :username
          %div
            = f.label :first_name
            = f.text_field :first_name
          %div
            = f.label :last_name
            = f.text_field :last_name
        .span4
          %div
            = f.label :email
            = f.email_field :email
          %div
            = f.label :password
            = f.password_field :password
          %div
            = f.label :password_confirmation
            = f.password_field :password_confirmation

    .well.span10
      %h4 2. Tell us where you live
      = f.label :country_id
      = f.select :country_id, Country.order('name ASC').map { |c| [c.printable_name, c.id] }, :prompt => true

      #new_user_map
        #registration_map

      #country_info

      %div
        = f.text_field :latitude, :style => "display: none;"
      %div
        = f.text_field :longitude, :style => "display: none;"
      %div
        = f.text_field :zoom, :style => "display: none;"
      %br

    .well.span10
      .span6
        %h4 3. And a bit about you...
        %div
          = f.label :avatar
          = f.file_field :avatar 

        %div
          = f.label :bio
          = f.text_area :bio, :class => "input-xxlarge"
      .span5
        %h4 4. Social services
        %div
          = f.label :gtalk
          = f.text_field :gtalk, :placeholder => "Nick"
        %div
          = f.label :skype
          = f.text_field :skype, :placeholder => "Nick"
        %div
          = f.label :jabber
          = f.text_field :jabber, :placeholder => "Nick"

        Services adress
        = f.fields_for :socials do |s|
          = s.text_field :url, :placeholder => "example: http://stackoverflow.com/", :class => "input-xxlarge"
          = s.link_to_remove "Remove", :class => 'btn btn-small btn-danger'
          %br
          %br
        = f.link_to_add "Add service", :socials, :class => 'btn btn-small btn-primary'

    .well.span10
      .span5
        %h4 5. Your privacy settings
        %p
          %p Search visibility
          = f.radio_button :search_visibility, true
          Allow search engines to index my profile page (recommended)
          %br/
          = f.radio_button :search_visibility, false
          Don't allow search engines to index my profile page
        %p 
          %p Email privacy
          = f.radio_button :email_privacy, 2 
          Anyone can see my email address
          %br/
          = f.radio_button :email_privacy, 1
          Only logged-in users can see my email address
          %br/
          = f.radio_button :email_privacy, 0
          Noone can ever see my email address
        %p
          %p IM privacy
          = f.radio_button :im_privacy, false
          Only logged-in users can see my IM details
          %br/
          = f.radio_button :im_privacy, true
          Anyone can see my IM details
      .span5

        %h4 6. Your skills and interests
        %div
          = f.label :tag_names, "Tags"
          = f.text_field :tag_names, :placeholder => "rails computers programming", :class => "input-xxlarge"
        %div
          = f.label :looking_for_work, "Looking for work?"
          = f.select :looking_for_work, {"Not looking for work at the moment" => 0, "Looking for freelance work" => 1, "Looking for fuil-time work" => 2}
  %div
    = f.submit "Sign me up"
= render :partial => "devise/shared/links"
